{"version":3,"file":"rps.js","sources":["../src/types.ts","../src/rps.ts"],"sourcesContent":["export enum HAND {\n  ROCK,\n  PAPER,\n  SCISSORS,\n}\n\nexport enum RPS_RESULT {\n  WIN,\n  LOSE,\n  DRAW,\n}\n\nexport interface Player {\n  id: string;\n  hand: HAND;\n}\n\nexport interface GAME_RESULT {\n  draw?: boolean;\n  winners?: Player[];\n}\n","import { GAME_RESULT, Player, HAND, RPS_RESULT } from \"./types\";\nexport * from \"./types\";\nexport function game(players: Player[]): GAME_RESULT {\n  const pHands = [...new Set(players.map((p) => p.hand))];\n  if (pHands.length !== 2) return { draw: true };\n\n  const winned =\n    rpsResult(pHands[0], pHands[1]) === RPS_RESULT.WIN ? pHands[0] : pHands[1];\n\n  return { winners: players.filter((p) => p.hand === winned) };\n}\n\nexport function makePlayer(hand: HAND): Player {\n  assert(hand >= 0 && hand < 3, \"player hands problem...\");\n  return {\n    id: getUUID(),\n    hand: hand,\n  };\n}\n\nexport function rpsResult(myHand: HAND, otherHand: HAND): RPS_RESULT {\n  return [RPS_RESULT.WIN, RPS_RESULT.LOSE, RPS_RESULT.DRAW][\n    (myHand - otherHand + 2) % 3\n  ];\n}\n\n// UUID v4 generator in JavaScript (RFC4122 compliant)\nfunction getUUID() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == \"x\" ? r : (r & 3) | 8;\n    return v.toString(16);\n  });\n}\n\nfunction assert(condition: boolean, message: string) {\n  if (!condition) {\n    throw new Error(message || \"Assertion failed\");\n  }\n}\n"],"names":[],"mappings":";;;;AAAU,IAAC,IAAI,mBAAmB,CAAC,CAAC,KAAK,KAAK;AAC9C,EAAE,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AACpC,EAAE,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,OAAO,CAAC;AACtC,EAAE,KAAK,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,UAAU,CAAC;AAC5C,EAAE,OAAO,KAAK,CAAC;AACf,CAAC,EAAE,IAAI,IAAI,EAAE,EAAE;AACL,IAAC,UAAU,mBAAmB,CAAC,CAAC,WAAW,KAAK;AAC1D,EAAE,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;AAC9C,EAAE,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AAChD,EAAE,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AAChD,EAAE,OAAO,WAAW,CAAC;AACrB,CAAC,EAAE,UAAU,IAAI,EAAE;;ACTZ,SAAS,IAAI,CAAC,OAAO,EAAE;AAC9B,EAAE,MAAM,MAAM,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC1D,EAAE,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC;AACzB,IAAI,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;AAC1B,EAAE,MAAM,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,KAAK,UAAU,CAAC,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AAC5F,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,KAAK,MAAM,CAAC,EAAE,CAAC;AAC/D,CAAC;AACM,SAAS,UAAU,CAAC,IAAI,EAAE;AACjC,EAAE,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,GAAG,CAAC,EAAE,yBAAyB,CAAC,CAAC;AAC3D,EAAE,OAAO;AACT,IAAI,EAAE,EAAE,OAAO,EAAE;AACjB,IAAI,IAAI;AACR,GAAG,CAAC;AACJ,CAAC;AACM,SAAS,SAAS,CAAC,MAAM,EAAE,SAAS,EAAE;AAC7C,EAAE,OAAO,CAAC,UAAU,CAAC,GAAG,EAAE,UAAU,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,GAAG,SAAS,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;AAC1F,CAAC;AACD,SAAS,OAAO,GAAG;AACnB,EAAE,OAAO,sCAAsC,CAAC,OAAO,CAAC,OAAO,EAAE,SAAS,CAAC,EAAE;AAC7E,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACjE,IAAI,OAAO,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;AAC1B,GAAG,CAAC,CAAC;AACL,CAAC;AACD,SAAS,MAAM,CAAC,SAAS,EAAE,OAAO,EAAE;AACpC,EAAE,IAAI,CAAC,SAAS,EAAE;AAClB,IAAI,MAAM,IAAI,KAAK,CAAC,OAAO,IAAI,kBAAkB,CAAC,CAAC;AACnD,GAAG;AACH;;;;;;;;"}